package main

import (
	"expdb/db/sqlite"
	"expdb/models"
	"fmt"
	"time"
)

func main() {
	//router := gin.Default()
	//public := router.Group("/")
	//routes.PublicRoutes(public)
	//err := db.ResetExploitDB()
	//if err != nil {
	//	panic(err)
	//}
	//expDB, err := db.InitExploitDB()
	//if err != nil {
	//	panic(err)
	//}
	//defer expDB.Close()
	//err = db.InsertExploit(expDB, models.Exploit{
	//	Date:     time.Now().Format("2006-01-02"),
	//	Title:    "test title",
	//	Type:     "test type",
	//	Platform: "test platform"})
	//if err != nil {
	//	panic(err)
	//}
	//str, err1 := db.GetRow(expDB, "exploits")
	//if err1 != nil {
	//	panic(err1)
	//}
	//fmt.Println(str)
	//err = db.InsertExploit(expDB, models.Exploit{
	//	Date:     time.Now().Format("2006-01-03"),
	//	Title:    "test title21",
	//	Type:     "test type1",
	//	Platform: "test platform1"})
	//if err != nil {
	//	panic(err)
	//}
	//str, err1 := db.GetRow(expDB, "exploits")
	//if err1 != nil {
	//	panic(err1)
	//}
	//fmt.Println(str)
	expdb, err := sqlite.New(`C:\Users\USER\Desktop\golang\expdb\db\sqlite\storage.db`)
	if err != nil {
		panic(err)
	}
	err = expdb.Init()
	if err != nil {
		panic(err)
	}
	err = expdb.Insert(&models.Exploit{
		Date:     time.Now().Format("2006-01-02"),
		Title:    "test title",
		Type:     "test type",
		Platform: "test platform"})
	if err != nil {
		panic(err)
	}
	err = expdb.Insert(&models.Exploit{
		Date:     time.Now().Format("2006-01-02"),
		Title:    "test title1",
		Type:     "test type1",
		Platform: "test platform1"})
	if err != nil {
		panic(err)
	}
	str, err := expdb.Print()
	if err != nil {
		panic(err)
	}
	fmt.Println(str)
	//	router.Run("localhost:8080")
}
